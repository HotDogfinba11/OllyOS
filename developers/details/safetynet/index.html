<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<title data-react-helmet="true">SafetyNet Â· Olly&#x27;s OS</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://github.com/HotDogfinba11//OllyOS/developers/details/safetynet"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="SafetyNet Â· Olly&#x27;s OS"><meta data-react-helmet="true" name="description" content="Olly&#x27;s OS uses a variety of workarounds to pass Google&#x27;s SafetyNet attestation checks without breaking any parts of the system."><meta data-react-helmet="true" property="og:description" content="Olly&#x27;s OS uses a variety of workarounds to pass Google&#x27;s SafetyNet attestation checks without breaking any parts of the system."><link data-react-helmet="true" rel="shortcut icon" href="/OllyOS/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://github.com/HotDogfinba11//OllyOS/developers/details/safetynet"><link data-react-helmet="true" rel="alternate" href="https://github.com/HotDogfinba11//OllyOS/developers/details/safetynet" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/HotDogfinba11//OllyOS/developers/details/safetynet" hreflang="x-default"><link rel="stylesheet" href="/OllyOS/assets/css/styles.1635d586.css">
<link rel="preload" href="/OllyOS/assets/js/runtime~main.f8170623.js" as="script">
<link rel="preload" href="/OllyOS/assets/js/main.17b72cb2.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_2qcr"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/OllyOS/"><div class="navbar__logo"><img src="/OllyOS/img/favicon.svg" alt="Olly&#x27;s OS Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/OllyOS/img/favicon.svg" alt="Olly&#x27;s OS Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Olly&#x27;s OS</b></a><a class="navbar__item navbar__link" href="/OllyOS/overview">Overview</a><a class="navbar__item navbar__link" href="/OllyOS/features">Features</a><a class="navbar__item navbar__link" href="/OllyOS/screenshots">Screenshots</a><a class="navbar__item navbar__link" href="/OllyOS/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/OllyOS/install/web">Install</a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo sidebarWithHideableNavbar_267A"><a tabindex="-1" class="sidebarLogo_3h0W" href="/OllyOS/"><img src="/OllyOS/img/favicon.svg" alt="Olly&#x27;s OS Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/OllyOS/img/favicon.svg" alt="Olly&#x27;s OS Logo" class="themedImage_1VuW themedImage--dark_hz6m"><b>Olly&#x27;s OS</b></a><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Discover</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OllyOS/faq">Frequently Asked Questions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Advanced</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OllyOS/community">Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/OllyOS/donate">Donate</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Developers</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OllyOS/developers/contribute">Contribute</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/OllyOS/developers/official-device-trees">Official device trees</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Technical details</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/OllyOS/developers/details/safetynet">SafetyNet</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Versions</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SafetyNet</h1></header><p>Ollyâ€™s OS uses a variety of workarounds to pass Googleâ€™s SafetyNet attestation checks without breaking any parts of the system.</p><p>Please note that these workarounds may break at any time, and custom ROMs will not be able to pass SafetyNet forever. They are a temporary solution at best.</p><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="verified-boot-state">Verified boot state<a aria-hidden="true" class="hash-link" href="#verified-boot-state" title="Direct link to heading">â€‹</a></h2><p>SafetyNet checks some system properties passed by the bootloader (via the kernel command line) to determine whether the bootloader is unlocked, and if so, fails the basic integrity check.</p><p>Ollyâ€™s OS sets fake values for these properties at boot. These values override the ones from the kernel command line, so Google Play Services is made unaware of the unlocked bootloader.</p><p>Commits:</p><ul><li><a href="https://github.com/PixelOS-Bluecross/platform_system_core/commit/7082c7571c9af160810b41aa6787874a5cf3c5ef" target="_blank" rel="noopener noreferrer">init: Set properties to make SafetyNet pass</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="build-fingerprint">Build fingerprint<a aria-hidden="true" class="hash-link" href="#build-fingerprint" title="Direct link to heading">â€‹</a></h2><p>SafetyNetâ€™s CTS profile check verifies the build profile against Googleâ€™s database of CTS-certified builds. It passes if the following properties match a known certified build:</p><ul><li>Device codename</li><li>System &amp; vendor security patch levels</li><li>Build fingerprint</li></ul><p>Spoofing the build fingerprint is the intuitive solution, but it causes issues because Android uses build fingerprint changes as a signal to clear and rebuild several caches. If the build fingerprint always stays the same (or only changes once per month), system updates that change resource IDs or native libraries embedded in APKs can cause strange issues. This forces users to wipe data on every update and results in poor UX.</p><p>Instead of overriding the system fingerprint for all builds, ProtonAOSP only reports the spoofed fingerprint to Google Play Services. This helps make SafetyNet pass without causing issues with the system itself.</p><p>Commits:</p><ul><li><a href="https://github.com/PixelOS-Bluecross/platform_frameworks_base/commit/f34bef86680232394b50a7a1adf570db9ec87438" target="_blank" rel="noopener noreferrer">Spoof build fingerprint for Google Play Services</a></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_3R7-" id="hardware-backed-attestation">Hardware-backed attestation<a aria-hidden="true" class="hash-link" href="#hardware-backed-attestation" title="Direct link to heading">â€‹</a></h2><p>On January 12, 2021, Google rolled out an update to make SafetyNet opportunistically use <a href="https://developer.android.com/training/articles/security-key-attestation" target="_blank" rel="noopener noreferrer">hardware-backed cryptographic attestation</a> if the device supports it. The signed attestation payloads cannot be forged without an exploit, but we can take advantage of the fact that the use of hardware-backed attestation is optimistic and prevent Google Play Services from using it.</p><p>On September 2, 2021, Google started enforcing hardware-backed attestation based on device information. Ollyâ€™s OS circumvents this by altering the device model name.</p><p><a href="https://github.com/kdrag0n/safetynet-fix" target="_blank" rel="noopener noreferrer">Universal SafetyNet Fix</a> is the portable version of this workaround for all ROMs.</p><p>Commits:</p><ul><li><a href="https://github.com/PixelOS-Bluecross/platform_frameworks_base/commit/36e84a5580536d14d544cccc253188a16a988c89" target="_blank" rel="noopener noreferrer">keystore: Block key attestation for SafetyNet</a></li><li><a href="https://github.com/PixelOS-Bluecross/platform_frameworks_base/commit/0eb527844cec218dacb5f3c286ad0bfb3d67d27b" target="_blank" rel="noopener noreferrer">Alter model name to avoid SafetyNet HW attestation enforcement</a></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_13-_"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-03-11T11:05:40.000Z">3/11/2022</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/OllyOS/developers/official-device-trees"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« <!-- -->Official device trees</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/OllyOS/versions/march"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">March<!-- --> Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#verified-boot-state" class="table-of-contents__link toc-highlight">Verified boot state</a></li><li><a href="#build-fingerprint" class="table-of-contents__link toc-highlight">Build fingerprint</a></li><li><a href="#hardware-backed-attestation" class="table-of-contents__link toc-highlight">Hardware-backed attestation</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Discover</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/OllyOS/overview">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/OllyOS/features">Features</a></li><li class="footer__item"><a class="footer__link-item" href="/OllyOS/screenshots">Screenshots</a></li><li class="footer__item"><a class="footer__link-item" href="/OllyOS/faq">FAQ</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/PixelOS-Bluecross/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/pixel3family" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hotdogfinba11.github.io/portfolio/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Developer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/PixelOS-Bluecross" target="_blank" rel="noopener noreferrer" class="footer__link-item">Source code</a></li><li class="footer__item"><a class="footer__link-item" href="/OllyOS/developers/contribute">Contribute</a></li><li class="footer__item"><a class="footer__link-item" href="/OllyOS/developers/details/safetynet">SafetyNet</a></li></ul></div><div class="col footer__col"><div class="footer__title">Resources</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/OllyOS/donate">Donate</a></li><li class="footer__item"><a href="https://kdrag0n.dev/terms-of-service" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms of service<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 <a href="https://kdrag0n.dev/">Danny Lin (kdrag0n)</a><br>Copyright Â© 2022<a href="https://hotdogfinba11.github.io/portfolio/"> Oliver Walton</a><br><span style="color:var(--ifm-footer-link-color);display:inline-block;padding-top:1em"><span style="color:var(--ifm-footer-link-color);display:inline-block;padding-top:1em">Android is a trademark of Google LLC.</span><br><span style="color:var(--ifm-footer-link-color)">No affiliation between Pixel Experience and Olly's OS.</span></span></div></div></div></footer></div>
<script src="/OllyOS/assets/js/runtime~main.f8170623.js"></script>
<script src="/OllyOS/assets/js/main.17b72cb2.js"></script>
</body>
</html>